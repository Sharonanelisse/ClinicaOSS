<ui:composition template="/templates/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:define name="content">
        <h1>Gestión de Tratamientos</h1>

        <h:form citaId="frmTratamientos">
            <p:growl citaId="msgTratamiento" showDetail="true" life="4000" />

            <!-- Formulario de tratamiento -->
            <h:panelGrid columns="2" columnClasses="label,value">

                <h:outputLabel value="Nombre:" for="nombreTratamiento"/>
                <p:inputText citaId="nombreTratamiento"
                             value="#{tratamientoBean.selected.nombreTratamiento}"
                             required="true" />

                <h:outputLabel value="Descripción:" for="descripcion"/>
                <p:inputTextarea citaId="descripcion"
                                 value="#{tratamientoBean.selected.descripcion}"
                                 rows="3"
                                 required="true" />

                <h:outputLabel value="Duración estimada:" for="duracionEstimado"/>
                <p:inputText citaId="duracionEstimado"
                             value="#{tratamientoBean.selected.duracionEstimado}" />

                <h:outputLabel value="Costo:" for="costo"/>
                <p:inputText citaId="costo"
                             value="#{tratamientoBean.selected.costo}" />

                <h:outputLabel value="Especialidad:" for="especialidadId"/>
                <p:inputText citaId="especialidadId"
                             value="#{tratamientoBean.selected.especialidadId}" />
            </h:panelGrid>

            <!-- Botones -->
            <p:commandButton value="Guardar"
                             action="#{tratamientoBean.save}"
                             update="tblTratamientos,frmTratamientos,msgTratamiento"
                             icon="pi pi-check" />

            <p:commandButton value="Cancelar"
                             action="#{tratamientoBean.newEntity}"
                             update="frmTratamientos"
                             icon="pi pi-times"
                             styleClass="p-button-secondary" />

            <!-- Tabla -->
            <p:dataTable citaId="tblTratamientos"
                         value="#{tratamientoBean.list}"
                         var="t"
                         paginator="true"
                         rows="10"
                         style="margin-top:20px;"
                         rowKey="#{t.citaId}"
                         selectionMode="single">

                <p:column headerText="ID">
                    <h:outputText value="#{t.citaId}" />
                </p:column>

                <p:column headerText="Nombre">
                    <h:outputText value="#{t.nombreTratamiento}" />
                </p:column>

                <p:column headerText="Descripción">
                    <h:outputText value="#{t.descripcion}" />
                </p:column>

                <p:column headerText="Duración estimada">
                    <h:outputText value="#{t.duracionEstimado}" />
                </p:column>

                <p:column headerText="Costo">
                    <h:outputText value="#{t.costo}" />
                </p:column>

                <p:column headerText="Especialidad">
                    <h:outputText value="#{t.especialidadId}" />
                </p:column>

                <p:column headerText="Acciones">

                    <!-- EDITAR -->
                    <p:commandButton value="Editar"
                                     action="#{tratamientoBean.edit(t)}"
                                     update="frmTratamientos"
                                     icon="pi pi-pencil" />

                    <!-- ELIMINAR -->
                    <p:commandButton value="Eliminar"
                                     action="#{tratamientoBean.delete(t)}"
                                     update="tblTratamientos msgTratamiento"
                                     icon="pi pi-trash"
                                     styleClass="ui-button-danger" />

                </p:column>
            </p:dataTable>
        </h:form>
    </ui:define>
</ui:composition>

